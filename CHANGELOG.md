<!-- markdownlint-disable MD024 -->

# 更新日志 (Changelog)

## v1.1.8 (2026-02-04)

### 发布流程

- 修复更新签名下载逻辑，改为通过API获取签名文件，解决发布流程中签名验证失败问题
- 重构 latest.json 生成脚本，分离独立模块并添加单元测试

### 构建优化

- 移除 release 构建中的 CPU 特定优化标志（-C target-cpu=sandybridge），提升构建兼容性

### 测试

- 修复预混料计算测试期望值，与实际计算逻辑保持一致

### 开发规范

- 移除过时的 .claude 配置文件和文档，精简项目结构

## v1.1.7 (2026-01-22)

### 功能调整

- AI 智能助手仅保留 DeepSeek 服务商支持，移除 OpenAI/OpenRouter 相关配置与文档说明
- AI 模型列表与请求逻辑移除 OpenRouter/OpenAI 兼容分支，统一为 DeepSeek 格式处理

### 开发规范

- 精简 Codex/Cursor/Trae 规则为入口级规范，统一指向 `.claude/CLAUDE.md` 与 `.claude/rules/`
- 入口规则补回 13 步闭环、Bug 修复流程、Skill 显式调用、禁止脚本文件与安全检查清单
- 将 Codex/Cursor/Trae 规则改为完整同步 `.claude/CLAUDE.md` 内容，避免工具无法读取 `.claude/` 目录

## v1.1.6 (2026-01-15)

### 功能优化

- 营养定义：新增比值分子/分母配置与推荐，支持按工厂保存比值计算逻辑
- 配方计算：统一按营养定义比值配置计算比值类营养，修复手工配方与计算结果偏差
- 配方优化：比值约束转换为线性约束并遵守配置的分子/分母逻辑，优化结果回填比值
- 配方优化：优化结果缺少原料列表时仍显示成本相关卡片
- 配方优化：营养指标表格补充显示指标代码列
- 配方优化：营养指标表格列顺序调整为先代码后名称
- 手工配方：比值展示按当前精度四舍五入后的分子/分母计算，避免与上方显示值不一致
- 文档：README 增加用户数据目录路径说明
- 配置：补充用户数据目录在 macOS/Windows/Linux 的实际路径说明
- 配置：默认配置注释改为用户数据目录路径说明
- 日志：按大小自动滚动切分，并基于总大小上限与文件数做清理，避免长期占用磁盘
- 配置：删除默认配置中未被代码使用的字段（如 UI、优化参数与控制台输出开关）
- 营养预测：营养指标映射改为从营养库推荐并可手动调整，避免硬编码指标代码，适配不同工厂定义
- 营养预测：后端预测与保存统一使用映射与营养定义，能量指标可配置并防止硬编码写入
- 营养预测：推荐匹配优先按名称进行，减少相近但不一致营养被误匹配
- 营养预测：映射卡片视觉层级与字段块美化，提升可读性
- 营养预测：映射下拉布局调整为更紧凑的多列栅格
- 营养预测：映射字段标签与提示徽标改为独立定位，避免窄列换行
- 营养预测：映射字段标签为提示徽标预留行高，避免遮挡
- 营养预测：移除字段提示徽标，避免窄列换行
- 营养预测：营养指标数值输入区新增视觉分隔与标题栏，强化上下区域区分
- 营养预测：暗色主题下映射与数值区标题/说明文字提升对比度
- 营养预测：暗色主题下映射卡片表头标题统一加深对比度
- 营养预测：映射推荐加强名称精确匹配，短缩写避免误匹配
- 营养预测：ADF/NDF 显示改为中文全称
- 营养预测：淀粉推荐避免优先匹配支链/直链淀粉
- 营养预测：淀粉优先精确匹配“淀粉”名称，避免命中含总糖变体
- 营养预测：数值输入区 ADF/NDF 显示改为中文全称
- 营养预测：数值输入区 ADF/NDF 标签缩短，避免折行

### 发布流程

- 发布流程增加签名密钥准备与回退逻辑，确保生成并上传 latest.json 自动更新文件
- 发布流程增加独立 updater 任务，集中生成并上传 latest.json，减少并行冲突
- 发布流程支持多平台 latest.json 聚合生成与上传
- latest.json 的 notes 使用最终 Release Notes 内容
- 发布流程在未设置私钥密码时不注入 updater 密码变量，避免 Windows 构建失败

### 安装包资源

- 新增原料导入模板目录 `import_templates` 并打包进安装资源，便于用户获取标准 Excel 模板
- 系统设置"数据目录"卡片新增模板目录展示与一键打开
- 修复导入模板资源路径，确保安装包内模板文件可见

### 导出优化

- 原料导出 Excel：营养指标按营养编码排序、自动列宽、全表左对齐

### 界面调整

- 主题切换按钮组移除外层描边与阴影
- 顶部版本信息按钮优化为更柔和的胶囊样式
- 顶部工厂切换区域去除外层白色底边框背景
- 预混料设计页面配比列输入框移除单位后缀，避免与表头单位重复
- 顶部工厂切换下拉框移除选中项图标，仅显示名称
- 顶部工厂切换下拉框移除多重边框与描边，减少视觉噪点
- 统一缩小页面主内容与顶部导航卡片的间距，减少垂直占用
- 工厂管理、原料管理、品种管理、系统设置页面统一接入顶部分隔间距规范
- 搜索与操作区域的顶部间距改为统一变量，避免额外放大空隙
- 搜索与操作卡片移除额外顶部间距，完全服从统一页面间距
- 营养预测页面顶部模式切换区移除额外内边距，缩短顶部空隙
- 收紧主页面顶部两张导航卡片之间的间距，减少垂直占用
- 修复生产批次页面空状态对齐问题，空数据时关闭固定列避免左侧高亮错觉
- 生产批次页面搜索筛选与操作按钮同一行展示，减少垂直占用
- 主界面顶部移除应用标题区域，当前工厂下拉框左对齐展示
- 检查更新入口移动至主页面顶部主题切换按钮后，并优化顶部栏展示样式
- 顶部栏仅显示版本号并点击触发检查更新，提供"有新版本"状态提示
- 顶部栏主题切换移除文字提示并与更新入口右对齐
- 主题切换按钮高度与版本信息对齐，减少顶部栏垂直占用
- 系统设置页面移除系统状态卡片及其状态刷新逻辑
- 品种管理页面卡片标题移除重复的颜色圆点，仅保留图标
- 营养预测页面参数输入区选择框与提示信息同一行展示，减少垂直占用
- 配方优化页面原料/营养指标表格行选中样式与原料管理保持一致
- 配方优化页面删除选中按钮移除数量提示
- 配方优化页面暗色主题统计卡片移除与语义颜色冲突的字体类，确保主题变量生效
- 配方优化页面暗色主题其他统计卡片加强对比度与色彩层次
- 配方优化页面对比卡片箭头颜色统一为主题变量
- 配方优化页面成本统计卡片缩小高度与间距，贴近预混料设计紧凑样式
- 配方优化页面成本统计卡片背景渐变优先级修复，避免被通用卡片样式覆盖
- 配方优化页面成本变化卡片移除百分比展示，仅保留成本变动数值
- 原料管理页面表格行选中样式与配方优化页面保持一致
- 预混料设计页面表格行样式与配方优化页面保持一致
- 预混料设计页面汇总行改为独立样式，行选中支持切换并使用统一高亮效果
- 预混料设计页面成本汇总卡片移除外层边框，保留单卡片展示
- 预混料设计页面成本汇总卡片区与上下卡片间距收紧
- 预混料设计页面成本汇总卡片区间距进一步收紧
- 预混料设计页面成本卡片内边距收紧，减少上下留白
- 配方优化页面原料/营养设置卡片标题栏空白收紧，减少垂直占用
- 配方优化页面暗色主题成本卡片对比度与层次增强

### 缺陷修复

- 预混料设计页面：稳定表格高度测量并移除表格区域 ResizeObserver，避免暗色主题下滚动条持续抖动
- 预混料设计页面：暗色主题下固定配比输入框对比度提升，避免数值难以辨认
- 预混料设计页面：暗色主题下原料数量卡片边框减弱，统一统计卡片观感

### 界面布局优化

- 系统设置页面卡片改为三列布局并收窄横向占用，提升信息密度与浏览效率
- 系统设置页面布局响应式优化，小屏单列/中屏两列/大屏三列
- 盈亏测算：空数据时表格与分页区域保持撑满页面，空态隐藏横向滚动条避免位置异常

### 规则与质量

- AGENTS 强制新增代码变更后的 clippy/fmt/lint 执行要求
- 修复导出逻辑中的未使用可变闭包以满足 clippy 零警告

### 后端清理

- 删除系统状态命令与类型绑定，移除相关依赖配置

## v1.1.5 (2026-01-14)

### 界面布局优化

- **主题切换功能重构**：将主题切换从系统设置页面移至主页面顶部导航栏，提升操作便捷性
  - 在工厂选择器后新增主题切换按钮组（浅色/深色/系统）
  - 采用快捷按钮形式替代下拉选择，一键切换主题
  - 支持三种模式：浅色主题、深色主题、跟随系统
  - 实时反馈切换成功消息提示
  - 按钮状态实时同步当前主题模式

### 页面调整

- **系统设置页面**：移除主题切换相关功能，保留小数位数设置和AI配置等核心功能
- **主页面导航**：顶部导航栏新增主题切换区域，与工厂选择器并排显示

### 样式优化

- **主题切换按钮**：新增紧凑美观的按钮样式，支持悬停效果和激活状态
  - 浅色模式：灯泡图标，蓝色高亮
  - 深色模式：灯泡图标，蓝色高亮
  - 系统模式：显示器图标，蓝色高亮
  - 深色模式下自动适配深色背景和边框

## v1.1.4 (2026-01-07)

### 功能优化

- **营养预测**：用户输入改为风干基础值（实际检测值），系统自动完成干物质折算，大幅提升易用性
  - 用户只需输入带水分的营养检测值（如粗蛋白8.5%）
  - 系统自动转换为干物质基础进行公式计算
  - 最终输出的能量值自动折算为风干基础
  - 公式：DM基础营养值 = 风干值 / (DM% / 100)

### 页面交互优化

- 生产批次：表格行点击即选中，移除多选复选框以匹配单条操作流程
- 生产批次：行选中样式与原料管理保持一致，统一高亮反馈
- 生产批次：移除选中数量提示，保持操作区简洁

### 规则整理

- AGENTS：合并重复的流程与模板条款，保持要求不缺失并提升可读性

### 页面布局优化

- **营养预测页面**：参数输入卡片与预测结果卡片改为上下排列（原为左右排列），UI全面优化，紧凑布局节省垂直空间
  - Tab切换区域精简为单行紧凑布局，进一步收紧内边距，降低卡片高度
  - 面板标题区域精简，移除冗余描述文字
  - 动物种类选择器尺寸缩小并优化选项文字
  - 营养成分输入提示区域精简为单行紧凑样式
  - 表单使用网格布局（2列/4列），8项营养输入在大屏单行展示，输入框样式更紧凑清晰
  - 营养输入框优化为柔和背景与聚焦高亮样式
  - 预测按钮尺寸缩小但高度提升，增强主操作可见性，移除底部重复按钮改为标题区单一触发
  - 整体内边距和间距全面收紧
- **营养预测页面**：预测结果卡片与公式信息区域同步精简优化，移除冗余描述保持简洁
- **库存管理**：空态提示全面优化，补充工厂/批次指引并提供重新加载入口
  - 空态提示改为表格区域覆盖层居中显示，在横向滚动时保持居中，避免被滚动偏移
  - 空态下固定表头列宽并强制表格横向滚动宽度，确保表头列完整显示
  - 空数据时取消固定列，补齐表格宽度，隐藏表体背景，消除左右分区和左侧色块
- **库存管理/生产批次**：表格行高调小，减少垂直占用；原料列移除编码行并收窄列宽，减少横向占用
- **手工配方**：顶部操作按钮高度调高提升可点击性，操作卡片收紧内边距减少垂直占用

### 开发工具优化

- **LSP 集成**：添加 LSP (Language Server Protocol) 使用规范文档
  - 新增 `.claude/rules/05-lsp-usage-standards.md` 详细规范文件
  - 规定 AI 在处理代码任务时必须主动使用 LSP 工具
  - 包含 hover、goToDefinition、findReferences、documentSymbol 等操作指南
  - 提供完整的使用场景、最佳实践和工作流程示例
  - 更新主规则文件和规则索引，确保每次新对话都遵守 LSP 规范

### 优化改进

- **顶部导航**：全面重构为双行布局，桌面端横向菜单切换页面，移动端顶部抽屉，工厂选择器同步迁移
  - 样式：精简尺寸，菜单行更紧凑，全量展示并自动换行，移除溢出省略与左右切换按钮
  - 布局：应用栏加入分隔线与菜单托盘，品牌与工厂区块更清晰，菜单导航区加入背景托盘与渐变层次增强与内容区域的区分
  - 菜单：采用固定列宽换行对齐多行菜单项，统一图标占位宽度修复多行文本对齐，改为自定义网格按钮布局彻底消除首列空白
  - 主题：新增顶部导航菜单样式与暗色适配，暗色主题下同步强化菜单托盘对比与阴影
  - 视觉：主工具栏卡片加入渐变高光与层次阴影弱化中部空白，品牌卡片背景透明度降低移除独立边框和扫光效果避免独立卡片边界感
  - 托盘：简化为单层背景，渐变改为居中向两侧淡化避免左到右偏移，移除整体外层卡片底色仅保留工具栏与菜单两块卡片
- **页面布局**：移除各页面顶部表头卡片释放垂直空间，主内容区增加左右内边距避免卡片贴边，统一各页面顶部卡片与菜单栏间距
- **页面布局**：配方分析页面 Tab 与选择卡片等高对齐，手工配方页面纵向间距统一，收敛手工配方顶部留白并补齐所有页面的顶部间距，修复品种管理与配方分析顶部间距覆盖导致的偏差
- **页面布局**：内容区改为内滚动容器并统一页面最小高度，移除 100vh 强制高度和外层底部 padding，动态同步顶部导航高度到 CSS 变量，顶部导航高度取整上取避免 1px 误差，默认窗口下移除外层滚动条
- **表格显示**：新增隔行底色与暗色主题适配提升行读取清晰度，覆盖所有页面表格，预混料设计表格同步生效
- **预混料设计**：成本概览卡片改为悬浮显示滚动时保持可见，悬浮位置避开顶部导航滚动到底部仍可见，原料表格滚动高度按视口自适应默认窗口下完整可见
- **预混料设计**：打开现有配方改为工具栏内联选择配方与版本移除独立对话框，添加量信息合并到顶部按钮区域移除独立参数设置卡片，顶部按钮区改为左右分组布局缩窄控件宽度避免换行，精简工具栏提示与按钮图标压缩顶部空白占用，改为单行水平布局超出时横向滚动
- **配方优化**：原料/营养表格高度自适应内容区仅保留表格内滚动，配方选择并入操作按钮卡片移除配方详情卡片减少垂直占用，操作按钮默认展示并按配方选择状态切换禁用态，配方选择下拉加宽提升显示完整度，工具栏控件高度对齐空间不足自动换行显示统一为中号高度，版本下拉选中值仅显示版本号避免遮挡，版本下拉宽度收窄到可完整显示版本号
- **原料管理**：表格滚动高度按容器自适应分页条固定在表格下方不遮挡数据，表格容器高度按内容区计算分页与表格底部对齐移除大块空白，收敛搜索框高度与上下内边距减少垂直占用
- **表格样式**：全局表格行高与单元格内边距统一收紧，覆盖所有页面表格，固定列同步隔行底色避免视觉割裂
- **规则/技能**：新增表格行高紧凑统一要求，同步到项目规则、前端技能、code-review/refactoring 技能及 Cursor/Claude/Trae 规则文件
- 规则：明确要求代码改动后必须执行代码审查并在回复中说明结果
- 手工配方：表格滚动高度按视口与面板位置自适应，避免默认窗口下被页面滚动遮挡

### 修复问题

- **预混料设计**：汇总卡片区域宽度与内容收缩行为异常，悬浮偏移导致遮挡表格与空白
- **配方优化**：原料/营养设置表格滚动条缺失，区域高度约束恢复内部滚动，表格容器引用类型修正消除类型报错，修复营养指标设置 Tab 切换仍显示原料列表的问题
- **页面布局**：顶部间距改用内边距，收敛各页面容器高度与内边距，消除默认外层滚动条；盈亏测算表格高度计算预留底部缓冲，消除残余外层滚动条
- **页面布局**：配方分析修复 Tab 卡片与成本卡片左右间距不一致，手工配方修复主内容卡片左右间距过宽导致的不一致
- **库存管理/生产批次**：表格高度按内容区自适应填满页面减少底部空白，表格容器与加载层改为伸缩布局空数据也可填满内容区，表格容器高度按内容区剩余空间计算避免空数据时留白，表格容器内部结构改为纵向伸缩空态填满卡片区域，表格组件容器高度设为 100% 空态也能撑满卡片
- **库存管理**：主表格支持分页并补齐空数据提示区域的铺满显示，空态填充样式仅在无数据时生效避免单行数据被拉伸，采购量测算表格高度按抽屉内容区自适应分页不再留空白，修复采购量测算表格依赖顺序导致的 TypeScript 报错
- **手工配方**：营养指标展示与保存统一为营养定义全量计算值，保存为原料不再遗漏指标
- **手工配方**：营养指标列表按用户常用偏好优先展示

## v1.1.3 (2026-01-04)

### 新增功能

- 原料管理：新增"查看使用配方"按钮与右键入口，展示原料用量占比与成本贡献
- 原料管理：使用配方抽屉支持手动调整原料价格并重算受影响配方成本
- 原料管理：使用配方抽屉支持批量替换原料并自动重算成本
- 原料管理：替换前校验目标原料已存在则终止操作

### 优化改进

- 原料管理：使用配方查询增加会话缓存与列配置 memo，减少重复请求与重渲染
- 原料管理：搜索框尺寸与布局优化，提升可用性
- 成本重算：使用 HashSet 加速受影响原料判定，降低遍历开销
- 原料管理：刷新列表时同步已选原料信息，避免价格滞后
- 原料管理：原料使用配方抽屉移除顶部提示信息并优化价格编辑区布局与保存按钮样式
- 原料管理：使用配方表格移除"原料单价"列，避免重复信息展示
- 原料管理：表格滚动高度改为基于视口计算，最大化窗口减少底部空白
- 原料管理：滚动高度计算增加容器上限，确保分页始终可见
- 盈亏测算：统计卡片精简为 6 张并在大屏单行展示，缩小卡片尺寸
- 盈亏测算：表格区域改为填满剩余高度并固定分页显示，滚动高度按表头/分页实际高度自适应
- 盈亏测算：移除页面底部 padding 并收紧分页边距，贴近窗口底部显示
- 品种管理：三卡片默认展示，统一卡片/按钮布局与提示文案
- 品种管理：品种与生长阶段卡片并排，阶段选择改为下拉/标签切换
- 品种管理：顶部卡片纵向间距收敛，阶段描述信息对齐优化
- 品种管理：空态提示紧凑化并垂直居中，减少顶部卡片空白
- 品种管理：顶部两卡高度拉齐，底部对齐显示
- 品种管理：顶部两卡改为伸缩布局，确保底部始终齐平
- 品种管理：品种/阶段描述行统一底部对齐
- 品种管理：顶部卡片最小高度统一，底部严格齐平
- 品种管理：生长阶段空态提示缩小，减少顶部卡片高度差
- 品种管理：营养标准卡片搜索框前置并与操作按钮同排显示，节省垂直空间

### 修复问题

- 原料价格更新时批量查询配方原料 SQL 语法错误
- 原料管理：保存使用配方价格时避免行值 IN 语法，修复 SQLite 语法错误导致的更新失败
- 成本重算：原料价格更新后按受影响配方直接重算成本并刷新缓存
- 原料管理：优化表格容器与 Spin 结构的 flex 自适应，缩小底部空白并稳定分页区域
- 原料管理：分页条固定可见，避免滚动时被遮挡
- 原料管理：批量替换原料后重算配方成本的批量原料查询 SQL 拼接错误

## v1.1.2 (2025-12-31)

### 新增功能

- 使用统一格式化器展示耗时与系统指标

### 优化改进

- 原料管理：营养指标改为弹窗查看，新增“查看该原料的营养指标”按钮并统一双击/右键入口
- 原料表格：滚动区域自适应高度，减少底部空白
- 选中行样式：高亮对比度增强，悬停与选中一致
- 性能优化：原料营养指标前端缓存与后台刷新，打开弹窗更快
- 配方管理：信息卡片布局优化，配方详情列表更紧凑
- 表格样式：列文本统一左对齐
- 配方查询：减少数据库查询次数，提升列表加载性能
- 预混料：原料营养数据批量获取，减少重复查询
- 监控服务：序列化错误处理更安全
- 数据层：Tauri 命令返回类型统一，SQL 查询替换为显式列名
- 设置/工厂：使用 parking_lot 避免锁中毒；工厂删除操作增加事务保障

### 修复问题

- 原料导出字段可选时列索引依赖 unwrap 导致的崩溃
- 营养指标统计显示问题，并提示过滤项
- 配方导入原料匹配逻辑优化并扩展固定配比范围
- 空值处理错误并改进错误提示
- 右键菜单移除无效“查看详情”项，避免误导

### 移除

- 进一步清理备份功能残留代码

### 构建/工程

- 前端 `tsconfig.node.json` 配置更新
- 更新 `.gitignore` 并清理代码注释

### 文档

- 添加代码审查报告文档
- 删除已完成的代码审查报告文件

## v1.1.1 (2025-12-19)

### 新增功能

- **预混料标签反推**：根据预混料标签上的营养含量和添加量反推原料配比、成本及全价料营养标准
  - 支持标签值与原料配比的自动计算
  - 载体原料自动补足配比功能
  - 成本计算和警告提示
  - 支持保存反推结果为配方
- 应用更新功能：支持检查更新并重启生效，改进错误处理
- **配方优化保存模式**：新增覆盖当前版本保存功能
  - 支持新版本和覆盖当前版本两种保存方式
  - 添加保存模式选择器
  - 优化配方版本管理逻辑
- **配方管理增强**：添加原料和营养指标一键清空功能
  - 支持批量清空原料列表
  - 支持批量清空营养指标
  - 添加表格行选中样式

### 优化改进

- **营养指标处理**：增强营养指标计算和显示逻辑
  - 在营养约束中添加指标名称字段
  - 优化引擎确保所有营养指标都有实际值
  - 改进前端营养指标名称显示
  - 优先使用前端传递的营养约束列表
- **界面布局优化**：
  - 手工配方页面改为标签页形式，简化操作区域
  - 预混料设计页面优化参数设置面板为紧凑单行样式
  - 移除不必要的装饰性元素
  - 统一组件类名和间距控制
- 配方分析对比卡片布局与样式优化
- **代码质量提升**：
  - 清理未使用的变量、导入和类型定义
  - 简化错误处理逻辑，统一使用静默处理
  - 优化 React Hooks 依赖项，避免不必要的重新渲染
  - 修复 ESLint 警告
- **用户体验改进**：
  - 批次管理表格添加排序功能
  - 优化模态框的响应式样式
  - 调整前端默认保存方式为覆盖当前版本
  - 添加时间格式化工具方法（北京时间）

### 修复问题

- 修复营养指标计算逻辑，确保用户添加的指标都有实际值
- 更新维生素 D3 的营养代码从 N0291 到 N0306
- 修复预混料设计页面的布局和样式问题

### 移除

- 移除配方 Excel 导入功能及相关代码
- 移除未使用的增量备份功能

### 文档

- 更新前端 UI 规范文档，补充响应式布局等要求

---

## v1.1.0 (2025-12-17)

### 新增

- 原料库存管理：全新的原料库存管理模块，支持库存盘点、差异分析、采购计划生成
- 原料库存计划：支持设置月用量、标准库存天数，自动计算可用天数和采购量
- 批量库存导出：支持将库存盘点数据导出为 Excel 文件
- 仓位管理：支持自定义仓位（小料库、大料库、其他原料库等），原料可分配到不同仓位
- 配方选择对话框：新增通用配方选择组件，支持多版本选择和批量添加
- AI 上下文增强：AI 助手现在可以感知原料库存、生产批次等页面的上下文信息
- localStorage 支持：各页面选中数据自动保存，AI 助手可获取当前页面上下文
- 原料管理表格列宽调整：添加 react-resizable 支持表头拖拽调整列宽
- 配方管理导出格式选择：新增导出格式下拉菜单，支持多种导出格式
- 系统路径管理：添加系统路径信息展示卡片，显示关键目录和文件路径
- 文件浏览器打开功能：支持跨平台打开文件浏览器定位到指定目录

### 优化

- 表格分页重构：将原料管理、盈亏测算、原料选择对话框等页面的滚动加载改为标准分页加载
- 后端分页查询：新增 `get_materials_paginated` API，支持 LIMIT/OFFSET 分页和总数统计
- N+1 查询优化：批量加载原料营养数据，使用 HashMap 进行 O(1) 查找
- 前端性能优化：使用 `useCallback`、`useMemo` 优化分页回调和数据计算
- 统计计算优化：盈亏测算页面一次遍历完成所有统计计算，避免多次 filter/reduce
- 代码清理：删除所有滚动加载相关的死代码（IntersectionObserver、loadMore、hasMore 等）
- 生产批次管理：优化配方管理和 UI 交互，支持快速添加配方
- 缓存系统：新增原料库存计划缓存和库存快照缓存，提升查询性能
- CI/Release：简化发布流程，移除 release_type 输入，优化 tag 处理逻辑
- Tauri 配置：移除 updater target，优化 latest.json 处理
- 报告导出文件名：使用 ISO 日期格式替代时间戳，更易读
- 报告原料成本排序：按配比从大到小排序，便于查看主要原料
- 路径管理系统重构：分离应用安装目录和用户数据目录，提升跨平台兼容性
- 暗色模式样式优化：修复表格、卡片和文本在暗色模式下的显示问题
- 预混料设计页面：优化卡片样式和交互效果
- 数字格式化统一：使用 formatters 统一格式化数字显示
- 系统设置界面简化：移除报告预览功能，优化路径显示卡片布局
- 更新检查位置调整：将更新检查功能移至底部栏

### 修复

- 修复配方管理和品种管理页面残留的滚动加载代码
- 修复盈亏测算中 253AHG 配方净价格数据问题
- 修复时间戳显示问题：统一乘以 1000 转换为毫秒
- 修复原料管理分页选择建议项时丢失已选项的问题
- 修复暗色模式下的 UI 显示问题
- 修复 AI 悬浮按钮位置计算和窗口大小变化处理问题
- 增强配方优化页面统计卡片暗色主题下的对比度与层次

### 移除

- 移除不再使用的报告预览功能及相关代码

### 数据

- 更新猪预混料配方原料编码为无前缀格式
- 统一牛羊营养标准数据的创建时间

### 文档

- 新增原料库存管理页面使用说明书

---
